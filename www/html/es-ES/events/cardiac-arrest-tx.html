<style>
    .cardiac-arrest-tx #list-group-2 > ul {
        background-color: #fcf8e4;
        border: 1px solid #666
    }
    body.hasDarkMode .cardiac-arrest-tx #list-group-2 > ul {
        background-color: #333;
    }
</style>

<div class="event-nav">
    <div class="button-group">
        <div class="button-container">
            <button data-uri="/html/{lang}/events/cardiac-arrest-dx.html" data-title="Cardiac Arrest" class="bg-dx">Dx</button>
        </div>
        <div class="button-container">
            <button data-uri="/html/{lang}/events/cardiac-arrest-ddx.html" data-title="Cardiac Arrest" class="bg-ddx">DDx</button>
        </div>
        <div class="button-container">
            <button data-uri="/html/{lang}/events/cardiac-arrest-tx.html" data-title="Cardiac Arrest" class="bg-tx emphasis">Tx</button>
        </div>
        <div class="button-container">
            <button data-uri="/html/{lang}/events/cardiac-arrest-drugs.html" data-title="Cardiac Arrest" class="bg-drugs">Drugs</button>
        </div>
    </div>
    <div class="bg-tx event-title">Treatment</div>
</div>
<div class="cardiac-arrest-tx page">

    <strong>Pick One:</strong>

    <div id="button-group-1" class="button-group">
        <div class="button-container">
            <button>Initial Actions</button>
        </div>
    </div>

    <ul id="list-group-1" class="display-none">
        <li>If no pulse or HR &lt; 60 beats per minute with poor perfusion despite effective ventilation with oxygen</li>
        <li>Increase O<sub>2</sub> to 100%. Turn off all anesthetic gases and anesthetic infusions</li>
        <li>Notify surgeon, call for help and code cart/defibrillator</li>
        <li>If ETT, 100-120 chest compressions/min + 10 breaths/min; avoid hyperventilation</li>
        <li>If no ETT, 15:2 compression:ventilation ratio (100-120 chest compressions/min + 8 breaths/min)</li>
        <li>For chest compressions, ensure EtCO<sub>2</sub> &gt; 10 mmHg (go to <span data-uri="/html/{lang}/events/chest-compression-tx.html" data-title="Cardiac Arrest Supine/Prone Chest Compressions" class="uri">CHEST COMPRESSIONS: SUPINE/PRONE</span>)
            <ul>
                <li>Switch compressor every 2 min</li>
                <li>Use sudden increase in EtCO<sub>2</sub> for ROSC, Do NOT stop compressions for pulse check</li>
            </ul>
        </li>
        <li>Start timer. Designate team leader. Assign roles. Designate a scribe/recorder. Notify family</li>
        <li>Consider <span class="uri" data-uri="/html/{lang}/events/cardiac-arrest-ddx.html" data-title="Cardiac Arrest">DDx</span></li>
        <li>Continue with Follow-on Actions</li>
    </ul>

    <div id="button-group-2" class="button-group">
        <div class="button-container">
            <button>Follow-on Actions</button>
        </div>
    </div>

    <div id="list-group-2" class="display-none">
        <div>Repeat sequence below until return of spontaneous circulation:</div>
        <ul>
            <li>If still in VF/VT, shock 4 joules/kg q2 min (up to 10 joules/kg on subsequent shocks)</li>
            <li>Resume chest compressions immediately regardless of rhythm</li>

            <li class="no-weight">Epinephrine 10 MICROgrams/kg IV q 3-5 min while in arrest (MAX 1 mg)
                <ul>
                    <li>If still no ROSC after second dose of EPINEPHrine, activate <span data-phone-number="ECMO">ECMO</span></li>
                </ul>
            </li>
            <li class="has-weight">Epinephrine <span id="weight-range-1"></span> MICROgrams <span class="per-kg-weight">(10 MICROgrams/kg, MAX 1 mg)</span> IV q 3-5 min while in arrest
                <ul>
                    <li>If still no ROSC after second dose of EPINEPHrine, activate <span data-phone-number="ECMO">ECMO</span></li>
                </ul>
            </li>
            <li>Check pulse &amp; rhythm q 2 min during compressor change</li>
            <li>Check for reversible causes (Hs and Ts) early and often (see <span data-uri="/html/{lang}/events/cardiac-arrest-ddx.html" data-title="Cardiac Arrest" class="uri">DDX</span>)</li>
            <li class="no-weight">Lidocaine 1 mg/kg bolus (MAX 100 mg); may repeat (total: 2 doses) OR amiodarone 5 mg/kg bolus; may repeat (total: 3 doses)
            <li class="has-weight">Lidocaine <span id="weight-range-2"></span> mg <span class="per-kg-weight">(1 mg/kg, MAX 100 mg)</span> bolus; may repeat (total: 2 doses) OR amiodarone <span id="weight-range-3"></span> mg <span class="per-kg-weight">(5 mg/kg)</span> bolus; may repeat (total: 3 doses)
            <li>Repeat sequence in this box until return of spontaneous circulation</li>
        </ul>

    </div>
</div>

<script>

    // The "pick one" section uses the accordion paradigm to show only relevant data.
    const get = (id => document.getElementById(id)); // (this is a helper function)
    app.createAccordion([
        {button: get("button-group-1"), content: get("list-group-1")},
        {button: get("button-group-2"), content: get("list-group-2")},
    ]);

    if (app.weight > 0) {
        // 10 MICROgrams/kg, MAX 1 mg
        const calculatedRange1 = app.printNumber(Math.min(app.weight * 10, 1000), 0, 2);
        document.getElementById("weight-range-1").textContent = calculatedRange1;

        // 1 mg/kg, MAX 100 mg
        const calculatedRange2 = app.printNumber(Math.min(app.weight, 100), 0, 2);
        document.getElementById("weight-range-2").textContent = calculatedRange2;

        // 5 mg/kg
        const calculatedRange3 = app.printNumber(app.weight * 5, 0, 2);
        document.getElementById("weight-range-3").textContent = calculatedRange3;
    }
</script>

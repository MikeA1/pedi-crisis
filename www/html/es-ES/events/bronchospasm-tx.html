<div class="event-nav">
    <div class="button-group">
        <div class="button-container">
            <button data-uri="/html/{lang}/events/bronchospasm-dx.html" data-title="Broncoespasm" class="bg-dx">Diagnóstico</button>
        </div>
        <div class="button-container">
            <button data-uri="/html/{lang}/events/bronchospasm-ddx.html" data-title="Broncoespasm" class="bg-ddx">Diagnóstico diferencial</button>
        </div>
        <div class="button-container">
            <button data-uri="/html/{lang}/events/bronchospasm-tx.html" data-title="Broncoespasm" class="bg-tx emphasis">Tratamiento</button>
        </div>
        <div class="button-container">
            <button data-uri="/html/{lang}/events/bronchospasm-drugs.html" data-title="Broncoespasm" class="bg-drugs">Medicamentos</button>
        </div>
        <div class="button-container">
            <button data-uri="/html/{lang}/events/bronchospasm-crisis.html" data-title="Broncoespasm" class="bg-crisis">Crisis</button>
        </div>
    </div>
    <div class="bg-tx event-title">Tratamiento</div>
</div>

<div class="page">
   
    <strong>Escoja uno:</strong>

    <div id="button-non-intubated" class="button-group">
        <div class="button-container">
            <button>No intubado</button>
        </div>
    </div>
    <ul id="list-non-intubated" class="display-none m-l-1">
        <li class="no-weight">Si es severo, considerar ADRENalina 1-2 MICROgramos/kg IV (MAX 1 mg) o 10 microgramos/kg subcutánea o intramuscular (MAX 0.5 mg)</li>
        <li class="has-weight">Si es severo, considerar ADRENalina <span id="weight-range-4"></span> MICROgramos <span class="dose-definition">(1-2 MICROgramos/kg, MAX 1 mg)</span> IV
            o <span id="weight-range-5"></span> <span class="dose-definition">(10 MICROgramos/kg, MAX 0.5 mg)</span> MICROgramos subcutánea o intramuscular
        </li>
        <li>Administrar O<sub>2</sub> suplementario</li>
        <li>Auscultar el tórax, diferenciar de estridor/obstrucción extratorácica</li>
        <li>Considerar albuterol inhalado (con aerocámara) 2,5-5 mg. Si es severo, 5-20 mg/h inhalado</li>
        <li>Considerar radiografía de tórax</li>
        
        <li class="no-weight">Considerar esteroides IV: metilprednisolona 1 mg/kg IV (MAX 60 mg) o dexametasona 0,15-0,25 mg/kg (MAX 16 mg)</li>
        <li class="has-weight">Considerar esteroides IV: metilprednisolona <span id="weight-range-6"></span> mg <span class="dose-definition">(1 mg/kg, MAX 60 mg)</span> IV 
            o dexametasona <span id="weight-range-7"></span> mg <span class="dose-definition">(0,15-0,25 mg/kg, MAX 16 mg)</span></li>

        <li>Si es grave, considerar UCI y/o manejo avanzado de la vía aérea</li>
        <li>Considere <span class="uri" data-uri="/html/{lang}/events/bronchospasm-ddx.html" data-title="Broncoespasm">diagnóstico diferencial</span></li>
    </ul>

    <div id="button-intubated" class="button-group">
        <div class="button-container">
            <button>Intubado</button>
        </div>
    </div>
    <ul id="list-intubated" class="display-none m-l-1">
        <li class="no-weight">Si es grave, considerar ADRENalina 1-2 MICROgramos/kg IV (MAX 1 mg)</li>
        <li class="has-weight">Si es grave, considerar ADRENalina <span id="weight-range-2"></span> MICROgramos <span class="dose-definition">(1-2 MICROgramos/kg, MAX 1 mg)</span> IV</li>
        <li>Considerar albuterol inhalado 4-10 atomizaciones, repetir como sea necesario</li>
        <li>Considerar profundizar la anestesia</li>
        <li>Auscultar el tórax
            <ul>
                <li>¿Auscultación pulmonar simétrica?</li>
                <li>¿Intubación endobronquial?</li>
                <li>¿Sibilancias?</li>
            </ul>
        </li>
        <li>Revisar el tubo endotraqueal
            <ul>
                <li>¿Acodado?</li>
                <li>¿Hay secreciones o sangre en el tubo endotraqueal? ¿Necesita aspirar?</li>
            </ul>
        </li>
        <li class="no-weight">Si es necesario, administrar ketamina 1-2 mg/kg IV</li>
        <li class="has-weight">Si es necesario, administrar ketamina <span id="weight-range-1"></span> mg <span class="dose-definition">(1-2 mg/kg)</span> IV</li>
        
        <li>Considerar esteroides IV</li>
        <li>Considerar radiografía de tórax</li>
        <li class="no-weight">Para broncoespasmo refractario, considerar sulfato de magnesio 50-75 mg/kg (MAX 2 gramos) bolo en 20 min (PRECAUCIÓN, puede causar hipotensión)</li>
        <li class="has-weight">Para broncoespasmo refractario, considerar sulfato de magnesio <span id="weight-range-3"></span> mg <span class="dose-definition">(50-75 mg/kg, MAX 2 gramos)</span> 
            bolo en 20 min (PRECAUCIÓN, puede causar hipotensión)</li>
        <li>Considere <span class="uri" data-uri="/html/{lang}/events/bronchospasm-ddx.html" data-title="Broncoespasm">diagnóstico diferencial</span></li>
    </ul>
    
</div>

<script>
    // The "pick one" section uses the accordion paradigm to show only relevant data.
    const get = (name => document.getElementById(name)); // (this is a helper function)
    app.createAccordion([
        {button: get("button-intubated"), content: get("list-intubated")}, 
        {button: get("button-non-intubated"), content: get("list-non-intubated")}
    ]);

    if (app.weight > 0) {
        //1-2 mg/kg
        const calculatedRange1a = app.printNumber(app.weight);
        const calculatedRange1b = app.printNumber(app.weight * 2);
        document.getElementById("weight-range-1").textContent = calculatedRange1a + "-" + calculatedRange1b;

        // 1-2 MICROgramos/kg IV (MAX 1 mg)
        // Note: use `Math.min()` to apply "MAX 1 mg" logic.
        const calculatedRange2a = app.printNumber(Math.min(app.weight, 1000));
        const calculatedRange2b = app.printNumber(Math.min(app.weight * 2, 1000));
        document.getElementById("weight-range-2").textContent = calculatedRange2a === calculatedRange2b ? calculatedRange2a : calculatedRange2a + "-" + calculatedRange2b;

        // 50-75 mg/kg, MAX 2 grams
        const calculatedRange3a = app.printNumber(Math.min(app.weight * 50, 2000), 0, 1);
        const calculatedRange3b = app.printNumber(Math.min(app.weight * 75, 2000), 0, 1);
        document.getElementById("weight-range-3").textContent = calculatedRange3a + "-" + calculatedRange3b;

        // 1-2 MICROgramos/kg, MAX 1 mg
        // Note: use `Math.min()` to apply "MAX 1 mg" logic.
        const calculatedRange4a = app.printNumber(Math.min(app.weight, 1000));
        const calculatedRange4b = app.printNumber(Math.min(app.weight * 2, 1000));
        document.getElementById("weight-range-4").textContent = calculatedRange4a === calculatedRange4b ? calculatedRange4a : calculatedRange4a + "-" + calculatedRange4b;

        // 10 MICROgramos/kg, MAX 0.5 mg
        // Note: use `Math.min()` to apply "MAX 0.5 mg" logic.
        const calculatedRange5 = app.printNumber(Math.min(app.weight * 10, 500));
        document.getElementById("weight-range-5").textContent = calculatedRange5;

        // 1mg/kg IV, MAX 60 mg
        const calculatedRange6 = app.printNumber(Math.min(app.weight, 60), 0, 1);
        document.getElementById("weight-range-6").textContent = calculatedRange6;

        // 0.15-0.25 mg/kg, MAX 16 mg
        const calculatedRange7a = app.printNumber(Math.min(app.weight * 0.15, 16), 0, 2);
        const calculatedRange7b = app.printNumber(Math.min(app.weight * 0.25, 16), 0, 2);
        document.getElementById("weight-range-7").textContent = calculatedRange7a === calculatedRange7b ? calculatedRange7a : calculatedRange7a + "-" + calculatedRange7b;

    }
</script>
